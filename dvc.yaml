stages:
  download_adr_tcbbo:
    cmd: python -m data_tools.cli.batch_download_to_parquet_with_append --schema=tcbbo --datasets XNAS.BASIC --tickers=data/raw/adr_info.csv --tickers_columns=adr --output_dir=data/raw/adrs/tcbbo --start_date=2024-07-01 --end_date=${end_date} --partition_period=date
    deps:
      - data/raw/adr_info.csv
    params:
      - start_date
      - end_date
    outs:
      - data/raw/adrs/tcbbo:
          persist: true

  download_market_etf_tcbbo:
    cmd: python -m data_tools.cli.batch_download_to_parquet_with_append --schema=tcbbo --datasets XNAS.BASIC --tickers=data/raw/adr_info.csv --tickers_columns=market_etf_hedge --output_dir=data/raw/etfs/market/tcbbo --start_date=2024-07-01 --end_date=${end_date} --partition_period=date
    deps:
      - data/raw/adr_info.csv
    params:
      - start_date
      - end_date
    outs:
      - data/raw/etfs/market/tcbbo:
          persist: true

  # 1-minute BBO data download
  download_adr_bbo-1m:
    cmd: python -m data_tools.cli.batch_download_to_parquet_with_append --schema=bbo-1m --datasets XNYS.PILLAR XNAS.ITCH ARCX.PILLAR --tickers=data/raw/adr_info.csv --tickers_columns=adr --output_dir=data/raw/adrs/bbo-1m/by_exchange --start_date=${start_date} --end_date=${end_date} --partition_period=none
    deps:
      - data/raw/adr_info.csv
    params:
      - start_date
      - end_date
    outs:
      - data/raw/adrs/bbo-1m/by_exchange:
          persist: true

  download_market_etf_bbo-1m:
    cmd: python -m data_tools.cli.batch_download_to_parquet_with_append --schema=bbo-1m --datasets XNYS.PILLAR XNAS.ITCH ARCX.PILLAR --tickers=data/raw/adr_info.csv --tickers_columns=market_etf_hedge --output_dir=data/raw/etfs/market/bbo-1m/by_exchange --start_date=${start_date} --end_date=${end_date} --partition_period=none
    deps:
      - data/raw/adr_info.csv
    params:
      - start_date
      - end_date
    outs:
      - data/raw/etfs/market/bbo-1m/by_exchange:
          persist: true

  download_sector_etf_bbo-1m:
    cmd: python -m data_tools.cli.batch_download_to_parquet_with_append --schema=bbo-1m --datasets XNYS.PILLAR XNAS.ITCH ARCX.PILLAR --tickers=data/raw/sector_etfs.csv --tickers_columns=hedge --output_dir=data/raw/etfs/sector/bbo-1m/by_exchange --start_date=${start_date} --end_date=${end_date} --partition_period=none
    deps:
      - data/raw/sector_etfs.csv
    params:
      - start_date
      - end_date
    outs:
      - data/raw/etfs/sector/bbo-1m/by_exchange:
          persist: true

  # nbbo creation from 1min data
  create_nbbo_adr_bbo-1m:
    cmd: python -m data_tools.cli.nbbo_consolidate_bbo_1m --tickers=data/raw/adr_info.csv --tickers_columns=adr --raw_data_dir=data/raw/adrs/bbo-1m/by_exchange --output_dir=data/raw/adrs/bbo-1m/nbbo --parallel --ncores=6 --partition_period=none
    deps:
      - data/raw/adr_info.csv
      - data/raw/adrs/bbo-1m/by_exchange
    outs:
      - data/raw/adrs/bbo-1m/nbbo

  create_nbbo_market_etf_bbo-1m:
    cmd: python -m data_tools.cli.nbbo_consolidate_bbo_1m --tickers=data/raw/adr_info.csv --tickers_columns=market_etf_hedge --raw_data_dir=data/raw/etfs/market/bbo-1m/by_exchange --output_dir=data/raw/etfs/market/bbo-1m/nbbo --parallel --ncores=12 --partition_period=none
    deps:
      - data/raw/etfs/market/bbo-1m/by_exchange
    outs:
      - data/raw/etfs/market/bbo-1m/nbbo

  create_nbbo_sector_etf_bbo-1m:
    cmd: python -m data_tools.cli.nbbo_consolidate_bbo_1m --tickers=data/raw/sector_etfs.csv --tickers_columns=hedge --raw_data_dir=data/raw/etfs/sector/bbo-1m/by_exchange --output_dir=data/raw/etfs/sector/bbo-1m/nbbo --parallel --ncores=6 --partition_period=none
    deps:
      - data/raw/etfs/sector/bbo-1m/by_exchange
    outs:
      - data/raw/etfs/sector/bbo-1m/nbbo

  # daily closing price data download
  download_adr_close:
    cmd: python src/download_bbg_daily.py data/raw/adr_info.csv data/raw/adrs/adr_PX_LAST_adjust_none.csv --tickers_columns=adr --field=PX_LAST
    deps:
      - src/download_bbg_daily.py
      - data/raw/adr_info.csv
    params:
      - start_date
      - end_date
    outs:
      - data/raw/adrs/adr_PX_LAST_adjust_none.csv

  download_adr_open:
    cmd: python src/download_bbg_daily.py data/raw/adr_info.csv data/raw/adrs/adr_PX_OPEN_adjust_none.csv --tickers_columns=adr --field=PX_OPEN
    deps:
      - src/download_bbg_daily.py
      - data/raw/adr_info.csv
    params:
      - start_date
      - end_date
    outs:
      - data/raw/adrs/adr_PX_OPEN_adjust_none.csv

  adj_download_adr_open:
    cmd: python src/download_bbg_daily.py data/raw/adr_info.csv data/raw/adrs/adr_PX_OPEN_adjust_all.csv --tickers_columns=adr --field=PX_OPEN --adjust=all
    deps:
      - src/download_bbg_daily.py
      - data/raw/adr_info.csv
    params:
      - start_date
      - end_date
    outs:
      - data/raw/adrs/adr_PX_OPEN_adjust_all.csv

  download_ord_open:
    cmd: python src/download_bbg_daily.py data/raw/adr_info.csv data/raw/ordinary/ord_PX_OPEN_adjust_none.csv --tickers_columns=id --field=PX_OPEN --include_suffix
    deps:
      - src/download_bbg_daily.py
      - data/raw/adr_info.csv
    params:
      - start_date
      - end_date
    outs:
      - data/raw/ordinary/ord_PX_OPEN_adjust_none.csv

  adj_download_ord_open:
    cmd: python src/download_bbg_daily.py data/raw/adr_info.csv data/raw/ordinary/ord_PX_OPEN_adjust_all.csv --tickers_columns=id --adjust=all --field=PX_OPEN --include_suffix
    deps:
      - src/download_bbg_daily.py
      - data/raw/adr_info.csv
    params:
      - start_date
      - end_date
    outs:
      - data/raw/ordinary/ord_PX_OPEN_adjust_all.csv

  download_market_etf_open:
    cmd: python src/download_bbg_daily.py data/raw/adr_info.csv data/raw/etfs/market/market_etf_PX_OPEN_adjust_none.csv --tickers_columns=market_etf_hedge --field=PX_OPEN --symbol_suffix=" US Equity"
    deps:
      - src/download_bbg_daily.py
      - data/raw/adr_info.csv
    params:
      - start_date
      - end_date
    outs:
      - data/raw/etfs/market/market_etf_PX_OPEN_adjust_none.csv

  download_market_etf_close:
    cmd: python src/download_bbg_daily.py data/raw/adr_info.csv data/raw/etfs/market/market_etf_PX_LAST_adjust_none.csv --tickers_columns=market_etf_hedge --symbol_suffix=" US Equity" --field=PX_LAST
    deps:
      - src/download_bbg_daily.py
      - data/raw/adr_info.csv
    params:
      - start_date
      - end_date
    outs:
      - data/raw/etfs/market/market_etf_PX_LAST_adjust_none.csv

  adj_adr_close:
    cmd: python src/download_bbg_daily.py data/raw/adr_info.csv data/raw/adrs/adr_PX_LAST_adjust_all.csv --tickers_columns=adr --adjust=all --pad_lookback=${pred.lookback_days} --field=PX_LAST
    deps:
      - src/download_bbg_daily.py
      - data/raw/adr_info.csv
    params:
      - start_date
      - end_date
    outs:
      - data/raw/adrs/adr_PX_LAST_adjust_all.csv

  adj_market_etf_close:
    cmd: python src/download_bbg_daily.py data/raw/adr_info.csv data/raw/etfs/market/market_etf_PX_LAST_adjust_all.csv --tickers_columns=market_etf_hedge --symbol_suffix=" US Equity" --adjust=all --pad_lookback=${pred.lookback_days} --field=PX_LAST
    deps:
      - src/download_bbg_daily.py
      - data/raw/adr_info.csv
    params:
      - start_date
      - end_date
    outs:
      - data/raw/etfs/market/market_etf_PX_LAST_adjust_all.csv

  # downloading adr turnover
  download_adr_turnover:
    cmd: python src/download_bbg_daily.py data/raw/adr_info.csv data/raw/adrs/adr_turnover.csv --tickers_columns=adr --field=TURNOVER
    deps:
      - src/download_bbg_daily.py
      - data/raw/adr_info.csv
    params:
      - start_date
      - end_date
    outs:
      - data/raw/adrs/adr_turnover.csv

  # download sector etf close prices
  download_sector_etf_close:
    cmd: python src/download_bbg_daily.py data/raw/sector_etfs.csv data/raw/etfs/sector_etf_PX_LAST_adjust_none.csv --tickers_columns=hedge --symbol_suffix=" US Equity" --field=PX_LAST
    deps:
      - src/download_bbg_daily.py
      - data/raw/sector_etfs.csv
    params:
      - start_date
      - end_date
    outs:
      - data/raw/etfs/sector_etf_PX_LAST_adjust_none.csv

  download_ord_close:
    cmd: python src/download_bbg_daily.py data/raw/adr_info.csv data/raw/ordinary/ord_PX_LAST_adjust_none.csv --tickers_columns=id --include_suffix --field=PX_LAST
    deps:
      - src/download_bbg_daily.py
      - data/raw/adr_info.csv
    params:
      - start_date
      - end_date
    outs:
      - data/raw/ordinary/ord_PX_LAST_adjust_none.csv

  adj_download_ord_close:
    cmd: python src/download_bbg_daily.py data/raw/adr_info.csv data/raw/ordinary/ord_PX_LAST_adjust_all.csv --tickers_columns=id --include_suffix --adjust=all --field=PX_LAST
    deps:
      - src/download_bbg_daily.py
      - data/raw/adr_info.csv
    params:
      - start_date
      - end_date
    outs:
      - data/raw/ordinary/ord_PX_LAST_adjust_all.csv

  split_adj_download_ord_close:
    cmd: python src/download_bbg_daily.py data/raw/adr_info.csv data/raw/ordinary/ord_PX_LAST_adjust_split.csv --tickers_columns=id --include_suffix --adjust=split --pad_lookback=${pred.lookback_days} --field=PX_LAST
    deps:
      - src/download_bbg_daily.py
      - data/raw/adr_info.csv
    params:
      - start_date
      - end_date
    outs:
      - data/raw/ordinary/ord_PX_LAST_adjust_split.csv

  download_index_close:
    cmd: python src/download_bbg_daily.py data/raw/futures_symbols.csv data/raw/indices/indices_PX_LAST.csv --tickers_columns=index --symbol_suffix=" Index" --pad_lookback=${pred.lookback_days} --field=PX_LAST
    deps:
      - src/download_bbg_daily.py
      - data/raw/adr_info.csv
    params:
      - start_date
      - end_date
      - pred.lookback_days
    outs:
      - data/raw/indices/indices_PX_LAST.csv

  earnings:
    cmd: python src/get_earnings.py
    deps:
      - src/get_earnings.py
      - data/raw/adr_info.csv

  convert_ord_currency_close:
    cmd: python src/closing_domestic_prices.py
    deps:
      - src/closing_domestic_prices.py
      - data/raw/adr_info.csv
      - data/raw/ordinary/ord_PX_LAST_adjust_none.csv
      - data/raw/ordinary/ord_PX_LAST_adjust_all.csv
      - data/raw/currencies/minute_bars/GBPUSD_full_1min.txt
      - data/raw/currencies/minute_bars/EURUSD_full_1min.txt
      - data/raw/currencies/minute_bars/JPYUSD_full_1min.txt
      - data/raw/currencies/minute_bars/AUDUSD_full_1min.txt
    outs:
      - data/processed/ordinary/ord_close_to_usd_adr_PX_LAST_adjust_none.csv
      - data/processed/ordinary/ord_close_to_usd_adr_PX_LAST_adjust_all.csv

  convert_ord_currency_open:
    cmd: python src/opening_domestic_prices.py
    deps:
      - data/raw/adr_info.csv
      - src/opening_domestic_prices.py
      - data/raw/ordinary/ord_PX_OPEN_adjust_all.csv
      - data/raw/ordinary/ord_PX_OPEN_adjust_none.csv
      - data/raw/currencies/minute_bars/GBPUSD_full_1min.txt
      - data/raw/currencies/minute_bars/EURUSD_full_1min.txt
      - data/raw/currencies/minute_bars/JPYUSD_full_1min.txt
      - data/raw/currencies/minute_bars/AUDUSD_full_1min.txt
    outs:
      - data/processed/ordinary/ord_open_to_usd_adr_PX_OPEN_adjust_all.csv
      - data/processed/ordinary/ord_open_to_usd_adr_PX_OPEN_adjust_none.csv
      
  adr_adjustments:
    cmd: python src/get_adjustments.py data/raw/adrs/adr_PX_LAST_adjust_none.csv data/processed/adrs/adr_adjustment_factors.csv --symbol_suffix=" US Equity"
    deps:
      - src/get_adjustments.py
      - data/raw/adrs/adr_PX_LAST_adjust_none.csv
    outs:
      - data/processed/adrs/adr_adjustment_factors.csv

  market_etf_adjustments:
    cmd: python src/get_adjustments.py data/raw/etfs/market/market_etf_PX_LAST_adjust_none.csv data/processed/etfs/market/market_etf_adjustment_factors.csv --symbol_suffix=" US Equity"
    deps:
      - src/get_adjustments.py
      - data/raw/etfs/market/market_etf_PX_LAST_adjust_none.csv
    outs:
      - data/processed/etfs/market/market_etf_adjustment_factors.csv

  sector_etf_adjustments:
    cmd: python src/get_adjustments.py data/raw/etfs/sector_etf_PX_LAST_adjust_none.csv data/processed/etfs/sector_etf_adjustment_factors.csv --symbol_suffix=" US Equity"
    deps:
      - src/get_adjustments.py
      - data/raw/etfs/sector_etf_PX_LAST_adjust_none.csv
    outs:
      - data/processed/etfs/sector_etf_adjustment_factors.csv

  adr_mid_at_ordinary_auction:
    cmd: python src/adr_mid_at_ordinary_auction.py
    deps:
      - src/adr_mid_at_ordinary_auction.py
      - data/raw/adrs/adr_PX_LAST_adjust_none.csv
      - data/processed/adrs/adr_adjustment_factors.csv
      - data/raw/adr_info.csv
      - data/raw/adrs/bbo-1m/nbbo
    params:
      - start_date
      - end_date
    outs:
      - data/processed/adrs/adr_mid_at_ord_auction_adjust_all.csv
      - data/processed/adrs/adr_mid_at_ord_auction_adjust_none.csv

  usdjpy_to_jpyusd:
    cmd: python src/usdjpy_to_jpyusd_bars.py
    deps:
      - src/usdjpy_to_jpyusd_bars.py
      - data/raw/currencies/minute_bars/USDJPY_full_1min.txt
    outs:
      - data/raw/currencies/minute_bars/JPYUSD_full_1min.txt

  usd_index_futures:
    cmd: python src/usd_index_futures.py
    deps:
      - src/usd_index_futures.py
      - data/raw/futures/minute_bars/FTUK_full_1min_continuous_ratio_adjusted.txt
      - data/raw/futures/minute_bars/FDAX_full_1min_continuous_ratio_adjusted.txt
      - data/raw/futures/minute_bars/FESX_full_1min_continuous_ratio_adjusted.txt
      - data/raw/futures/minute_bars/FXXP_full_1min_continuous_ratio_adjusted.txt
      - data/raw/futures/minute_bars/FTI_full_1min_continuous_ratio_adjusted.txt
      - data/raw/futures/minute_bars/FCE_full_1min_continuous_ratio_adjusted.txt
      - data/raw/futures/minute_bars/NIY_full_1min_continuous_ratio_adjusted.txt
      - data/raw/currencies/minute_bars/GBPUSD_full_1min.txt
      - data/raw/currencies/minute_bars/EURUSD_full_1min.txt
      - data/raw/currencies/minute_bars/JPYUSD_full_1min.txt
    outs:
      - data/processed/futures/converted_minute_bars/symbol=FTUK/FTUK_close_to_usd_1min.parquet
      - data/processed/futures/converted_minute_bars/symbol=FDAX/FDAX_close_to_usd_1min.parquet
      - data/processed/futures/converted_minute_bars/symbol=FESX/FESX_close_to_usd_1min.parquet
      - data/processed/futures/converted_minute_bars/symbol=FXXP/FXXP_close_to_usd_1min.parquet
      - data/processed/futures/converted_minute_bars/symbol=FTI/FTI_close_to_usd_1min.parquet
      - data/processed/futures/converted_minute_bars/symbol=FCE/FCE_close_to_usd_1min.parquet
      - data/processed/futures/converted_minute_bars/symbol=NIY/NIY_close_to_usd_1min.parquet

  adr_daily_mid:
    cmd: python -m src.daily_fixed_time_mid --nbbo_dir=data/raw/adrs/bbo-1m/nbbo --time_to_save_hrs=${fixed_trade_time_hours} --time_to_save_min=${fixed_trade_time_min} --tickers=data/raw/adr_info.csv --tickers_columns=adr --output_filename=data/processed/adrs/adr_daily_fixed_time_mid.csv
    deps:
      - src/daily_fixed_time_mid.py
      - data/raw/adrs/bbo-1m/nbbo
      - data/raw/adr_info.csv
    params:
      - fixed_trade_time_hours
      - fixed_trade_time_min
    outs:
      - data/processed/adrs/adr_daily_fixed_time_mid.csv

  adr_open_mid:
    cmd: python -m src.daily_fixed_time_mid --nbbo_dir=data/raw/adrs/bbo-1m/nbbo --time_to_save_hrs=9 --time_to_save_min=31 --tickers=data/raw/adr_info.csv --tickers_columns=adr --output_filename=data/processed/adrs/adr_open_mid.csv
    deps:
      - src/daily_fixed_time_mid.py
      - data/raw/adrs/bbo-1m/nbbo
      - data/raw/adr_info.csv
    outs:
      - data/processed/adrs/adr_open_mid.csv

  daily_adr_for_cov:
    cmd: python -m src.daily_fixed_time_mid --nbbo_dir=data/raw/adrs/bbo-1m/nbbo --time_to_save_hrs=${daily_time_for_cov_hours} --time_to_save_min=${daily_time_for_cov_min} --tickers=data/raw/adr_info.csv --tickers_columns=adr --output_filename=data/processed/adrs/daily_mid_for_cov.csv
    deps:
      - src/daily_fixed_time_mid.py
      - data/raw/adrs/bbo-1m/nbbo
      - data/raw/adr_info.csv
    params:
      - daily_time_for_cov_hours
      - daily_time_for_cov_min
    outs:
      - data/processed/adrs/daily_mid_for_cov.csv

  adr_open_mean_premium:
    cmd: python src/adr_open_mean_prem.py
    deps:
      - src/adr_open_mean_prem.py
      - data/raw/adr_info.csv
    params:
      - premium_lookback_days
    outs:
      - data/processed/adrs/adr_open_mean_premium.csv

  market_etf_daily_fixed_time_mid:
    cmd: python -m src.daily_fixed_time_mid --nbbo_dir=data/raw/etfs/market/bbo-1m/nbbo --time_to_save_hrs=${fixed_trade_time_hours} --time_to_save_min=${fixed_trade_time_min} --tickers=data/raw/adr_info.csv --tickers_columns=market_etf_hedge --output_filename=data/processed/etfs/market/market_etf_daily_fixed_time_mid.csv
    deps:
      - src/daily_fixed_time_mid.py
      - data/raw/etfs/market/bbo-1m/nbbo
      - data/raw/adr_info.csv
    params:
      - fixed_trade_time_hours
      - fixed_trade_time_min
    outs:
      - data/processed/etfs/market/market_etf_daily_fixed_time_mid.csv

  fixed_time_signal:
    cmd: python src/futures_fixed_time_signal.py
    deps:
      - src/futures_fixed_time_signal.py
      - data/processed/adrs/adr_mid_at_ord_auction_adjust_none.csv
      - data/processed/adrs/adr_daily_fixed_time_mid.csv
      - data/processed/models/ordinary_betas_index_only.csv
      - data/processed/futures/converted_minute_bars
      - data/raw/adr_info.csv
      - data/raw/futures_symbols.csv
    params:
      - fixed_trade_time_hours
      - fixed_trade_time_min
      - start_date
      - end_date
    outs:
      - data/processed/fixed_time_signal.csv

  only_futures_full_signal:
    cmd: python src/only_futures_full_signal.py
    deps:
      - src/only_futures_full_signal.py
      - data/processed/adrs/adr_mid_at_ord_auction_adjust_none.csv
      - data/processed/models/ordinary_betas_index_only.csv
      - data/processed/futures/converted_minute_bars
      - data/raw/adrs/bbo-1m/nbbo
      - data/raw/adr_info.csv
      - data/raw/futures_symbols.csv
    params:
      - fixed_trade_time_hours
      - fixed_trade_time_min
      - start_date
      - end_date
    outs:
      - data/processed/futures_only_signal/

  stock_splits:
    cmd: python -m src.get_splits
    deps:
      - src/get_splits.py
      - data/raw/adr_info.csv
      - data/raw/sector_etfs.csv
    outs:
      - data/raw/all_splits.csv

  stock_dividends:
    cmd: python -m src.get_dividends
    deps:
      - src/get_dividends.py
      - data/raw/adr_info.csv
      - data/raw/sector_etfs.csv
    outs:
      - data/raw/all_dividends.csv

  index_only_model:
    cmd: python src/get_betas_no_sector.py
    deps:
      - src/get_betas_no_sector.py
      - data/raw/adr_info.csv
      - data/raw/futures_symbols.csv
      - data/raw/ordinary/ord_PX_LAST_adjust_split.csv
      - data/raw/indices/indices_PX_LAST.csv
    params:
      - pred.lookback_days
    outs:
      - data/processed/models/ordinary_betas_index_only.csv
  
  minute_volume_stats:
    cmd: python src/minute_volume_stats.py
    deps:
      - src/minute_volume_stats.py
      - data/raw/adrs/tcbbo/
    params:
      - start_date
      - end_date
      - avg_dollar_volume_lookback_days
    outs:
      - data/processed/adrs/minute_volume_stats

  market_etf_hedge_ratios:
    cmd: python src/market_etf_hedge_ratios.py
    deps:
      - src/market_etf_hedge_ratios.py
      - data/raw/adr_info.csv
      - data/raw/etfs/market/market_etf_PX_LAST_adjust_all.csv
      - data/raw/adrs/adr_PX_LAST_adjust_all.csv
    outs:
      - data/processed/market_etf_hedge_ratios.csv

  brit_backtest_fixed_time:
    cmd: backtester_run backtest_conifgs/single_time.yaml
    deps:
      - src/backtest_strategies/single_time_ADR.py
      - backtest_conifgs/single_time.yaml
      - data/processed/adrs/
      - data/processed/fixed_time_signal.csv
      - data/processed/adrs/adr_daily_fixed_time_mid.csv
      #- data/processed/etfs/market_etf_daily_fixed_time_mid.csv
      - data/raw/adrs/adr_PX_LAST_adjust_none.csv
      - data/raw/adrs/adr_turnover.csv
      - data/raw/all_splits.csv

  hedged_backtest_fixed_time:
    cmd: backtester_run backtest_conifgs/hedged_single_time.yaml
    deps:
      - src/backtest_strategies/single_time_ADR.py
      - backtest_conifgs/hedged_single_time.yaml
      - data/processed/fixed_time_signal.csv
      - data/processed/adrs/adr_daily_fixed_time_mid.csv
      - data/raw/adrs/adr_PX_LAST_adjust_none.csv
      - data/raw/adrs/adr_turnover.csv
      - data/raw/all_splits.csv
      - data/processed/etfs/market/market_etf_daily_fixed_time_mid.csv
      - data/raw/etfs/market/market_etf_PX_LAST_adjust_none.csv
      - data/processed/market_etf_hedge_ratios.csv

  minute_vwap_hedged_ADR_backtest:
    cmd: backtester_run backtest_conifgs/minute_vwap_hedged_ADR.yaml
    deps:
      - src/backtest_strategies/minute_vwap_hedged_ADR.py
      - backtest_conifgs/minute_vwap_hedged_ADR.yaml
      - data/processed/fixed_time_signal.csv
      - data/processed/adrs/adr_daily_fixed_time_mid.csv
      - data/raw/adrs/adr_PX_LAST_adjust_none.csv
      - data/raw/adrs/adr_turnover.csv
      - data/raw/all_splits.csv
      - data/processed/etfs/market/market_etf_daily_fixed_time_mid.csv
      - data/raw/etfs/market/market_etf_PX_LAST_adjust_none.csv
      - data/processed/market_etf_hedge_ratios.csv
      - data/processed/adrs/minute_volume_stats